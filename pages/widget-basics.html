    <h1 id="widget-basics">Widget Basics</h1>

    <p>The UI of a Tabris.js app consists of native widgets, represented by JavaScript objects. There are different types of widgets such as <code class="highlighter-rouge">Button</code>, <code class="highlighter-rouge">TextView</code>, or <code class="highlighter-rouge">ScrollView</code>. Every widget type is a subtype of <a href="/tabris-js-docs/latest/api/Widget.html">Widget</a> which provides common methods to get and set properties, be notified of events, and append widgets to a parent widget. Most of these methods return the widget itself to allow method chaining.</p>

    <h2 id="creating-native-widgets">Creating Native Widgets</h2>

    <p>Every widget constructor accepts an object with initial property values to create the native widget with. Here’s how you create and initialize a widget in Tabris.js:</p>

    <div class="language-js highlighter-rouge">
<pre class="highlight"><code><span class="kd">let</span> <span class="nx">button</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Button</span><span class="p">({</span>
  <span class="na">left</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="na">top</span><span class="p">:</span> <span class="mi">10</span><span class="p">,</span>
  <span class="na">text</span><span class="p">:</span> <span class="s1">'OK'</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>If you prefer declarative UI, you may also <a href="/tabris-js-docs/latest/lang.html#JSX">use <code class="highlighter-rouge">JSX</code> to create widgets</a>. When you <a href="/tabris-js-docs/latest/getting-started.html#create-your-first-app">generate a Tabris.js TypeScript project</a>, JSX support is already set up.</p>

    <h2 id="widget-properties">Widget Properties</h2>

    <p>Every native widget supports a set of properties (e.g. a text or a color). These properties can be read and written directly or using the Widget’s <code class="highlighter-rouge">get()</code> and <code class="highlighter-rouge">set()</code> methods.</p>

    <div class="language-js highlighter-rouge">
<pre class="highlight"><code><span class="nx">widget</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="s1">'Hello World'</span><span class="p">;</span>
<span class="kd">let</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">widget</span><span class="p">.</span><span class="nx">text</span><span class="p">;</span>
</code></pre>
    </div>

    <p>Example with <code class="highlighter-rouge">get()</code> and <code class="highlighter-rouge">set()</code>:</p>

    <div class="language-js highlighter-rouge">
<pre class="highlight"><code><span class="nx">widget</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="s1">'text'</span><span class="p">,</span> <span class="s1">'Hello World'</span><span class="p">);</span>
<span class="kd">let</span> <span class="nx">text</span> <span class="o">=</span> <span class="nx">widget</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="s1">'text'</span><span class="p">);</span>
</code></pre>
    </div>

    <p>Like with the constructor, it’s also possible to set multiple property values:</p>

    <div class="language-js highlighter-rouge">
<pre class="highlight"><code><span class="nx">button</span><span class="p">.</span><span class="nx">set</span><span class="p">({</span>
  <span class="na">text</span><span class="p">:</span> <span class="s1">'OK'</span><span class="p">,</span>
  <span class="na">background</span><span class="p">:</span> <span class="s1">'blue'</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>When trying to set an invalid value (e.g. a value of the wrong type), the value will be converted if possible, otherwise it will be ignored with a warning printed to the developer console. The <code class="highlighter-rouge">set()</code> method will also print a warning for unsupported properties.</p>

    <h2 id="events">Events</h2>

    <p>Widgets can notify listeners of events such as a user interaction or a property change. Event listeners can be added using the methods <code class="highlighter-rouge">on()</code> and <code class="highlighter-rouge">once()</code>, and removed using <code class="highlighter-rouge">off()</code>.</p>

    <p>Example:</p>

    <div class="language-js highlighter-rouge">
<pre class="highlight"><code><span class="kd">function</span> <span class="nx">selectionHandler</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Button '</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">target</span><span class="p">.</span><span class="nx">text</span> <span class="o">+</span> <span class="s1">' selected!'</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'select'</span><span class="p">,</span> <span class="nx">selectionHandler</span><span class="p">);</span>
</code></pre>
    </div>

    <p>The listener function is called with an event object that contains a number of properties depending on the event type. All events have the following common properties:</p>

    <ul>
        <li>
            <code class="highlighter-rouge">type</code>: the event type</li>
        <li>
            <code class="highlighter-rouge">target</code>: the widget that received the event</li>
        <li>
            <code class="highlighter-rouge">timeStamp</code>: the time at which the event was created, in milliseconds</li>
    </ul>

    <blockquote>
        <p><img class="emoji" title=":point_right:" alt=":point_right:" src="https://assets-cdn.github.com/images/icons/emoji/unicode/1f449.png" height="20" width="20" align="absmiddle"> Event types are case sensitive.</p>
    </blockquote>

    <p>A <em>context</em> object may be given as the third parameter to <code class="highlighter-rouge">on()</code>. This object will then be available as <code class="highlighter-rouge">this</code> inside the listener function.</p>

    <div class="language-js highlighter-rouge">
<pre class="highlight"><code><span class="kd">function</span> <span class="nx">selectionHandler</span><span class="p">()</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">foo</span><span class="p">);</span>
<span class="p">};</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'select'</span><span class="p">,</span> <span class="nx">selectionHandler</span><span class="p">,</span> <span class="p">{</span><span class="na">foo</span><span class="p">:</span> <span class="s1">'Hello World'</span><span class="p">});</span>
</code></pre>
    </div>

    <p>The method <code class="highlighter-rouge">once()</code> does the same as <code class="highlighter-rouge">on()</code>, but it removes the listener after it has been invoked by an event.</p>

    <p>To remove a listener, use the method <code class="highlighter-rouge">off()</code>.</p>

    <h3 id="change-events">Change Events</h3>

    <p>All widgets support property change events that are fired when a property value changes. All change events are named <code class="highlighter-rouge">[propertyName]Changed</code> and provide a <code class="highlighter-rouge">ChangeEvent</code>.</p>

    <p>In addition to the common event properties, change events have a property <code class="highlighter-rouge">value</code> that contains the new value of the property.</p>

    <p>Example:</p>

    <div class="language-js highlighter-rouge">
<pre class="highlight"><code><span class="k">new</span> <span class="nx">TextInput</span><span class="p">().</span><span class="nx">on</span><span class="p">(</span><span class="s1">'textChanged'</span><span class="p">,</span> <span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'The text has changed to: '</span> <span class="o">+</span> <span class="nx">event</span><span class="p">.</span><span class="nx">value</span><span class="p">);</span>
<span class="p">});</span>
</code></pre>
    </div>

    <p>It’s often convenient to use the <a href="http://exploringjs.com/es6/ch_destructuring.html">ES6 destructuring syntax</a> for the event parameter, which allows to extract event properties as named variables:</p>

    <div class="language-js highlighter-rouge">
<pre class="highlight"><code><span class="nx">checkBox</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'selectionChanged'</span><span class="p">,</span> <span class="p">({</span><span class="nx">target</span><span class="p">,</span> <span class="na">value</span><span class="p">:</span> <span class="nx">checked</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="p">{</span>
  <span class="nx">target</span><span class="p">.</span><span class="nx">text</span> <span class="o">=</span> <span class="nx">checked</span> <span class="p">?</span> <span class="s1">'checked'</span> <span class="p">:</span> <span class="s1">'unchecked'</span><span class="p">;</span>
<span class="p">});</span>
</code></pre>
    </div>

    <h2 id="animations">Animations</h2>

    <p>All widgets have the method <a href="/tabris-js-docs/latest/api/Widget.html#animateproperties-options"><code class="highlighter-rouge">animate(properties, options)</code></a>. It expects a map of properties to animate (akin to the <code class="highlighter-rouge">set</code> method), and a set of options for the animation itself.
        All animated properties are set to their target value as soon as the animation starts. Therefore, calling <code class="highlighter-rouge">get</code> will always return either the start or target value, never one in between.
        Only the properties <code class="highlighter-rouge">transform</code> and <code class="highlighter-rouge">opacity</code> can be animated.</p>

    <p>The <code class="highlighter-rouge">animate</code> method returns a Promise that is resolved once the animation is completed. If the animation is aborted, e.g. by disposing the widget, the promise is rejected.</p>

    <p>Example:</p>

    <div class="language-js highlighter-rouge">
<pre class="highlight"><code><span class="nx">label</span><span class="p">.</span><span class="nx">animate</span><span class="p">({</span>
  <span class="na">opacity</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="na">transform</span><span class="p">:</span> <span class="p">{</span>
    <span class="na">translationX</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span>
    <span class="na">scaleX</span><span class="p">:</span> <span class="mf">0.1</span>
  <span class="p">}</span>
<span class="p">},</span> <span class="p">{</span>
  <span class="na">duration</span><span class="p">:</span> <span class="mi">1000</span><span class="p">,</span>
  <span class="na">easing</span><span class="p">:</span> <span class="s1">'ease-out'</span>
<span class="p">}).</span><span class="nx">then</span><span class="p">(()</span> <span class="o">=&gt;</span> <span class="nx">label</span><span class="p">.</span><span class="nx">dispose</span><span class="p">());</span>
</code></pre>
    </div>

    <h2 id="the-widget-tree">The Widget Tree</h2>

    <h3 id="setting-the-parent">Setting the Parent</h3>

    <p>To become visible, a widget needs a parent. The top-level parent of all widgets is the content view (<code class="highlighter-rouge">ui.contentView</code>). Widgets can be included in the widget hierarchy using <code class="highlighter-rouge">append()</code> or <code class="highlighter-rouge">appendTo()</code>.</p>

    <p>Example:</p>

    <div class="language-js highlighter-rouge">
<pre class="highlight"><code><span class="kd">let</span> <span class="nx">button</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Button</span><span class="p">({</span>
  <span class="na">text</span><span class="p">:</span> <span class="s1">'OK'</span><span class="p">,</span>
  <span class="p">...</span>
<span class="p">}).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">parent</span><span class="p">);</span>
</code></pre>
    </div>

    <p>If the widget already has a parent, it is removed from the actual parent and appended to the new one. An <em>addChild</em> event is triggered on the parent.</p>

    <p>It’s also possible to add multiple widgets to the same parent using <code class="highlighter-rouge">append()</code>:</p>

    <div class="language-js highlighter-rouge">
<pre class="highlight"><code><span class="nx">page</span><span class="p">.</span><span class="nx">append</span><span class="p">(</span><span class="nx">okButton</span><span class="p">,</span> <span class="nx">cancelButton</span><span class="p">);</span>
</code></pre>
    </div>

    <h3 id="traversing">Traversing</h3>

    <p>See also: <a href="/tabris-js-docs/latest/selector.html">Selector API</a></p>

    <p>The current parent of a widget is returned by the <a href="/tabris-js-docs/latest/api/Widget.html#parent"><code class="highlighter-rouge">parent</code></a> method,
        and the children by the <a href="/tabris-js-docs/latest/api/Widget.html#children"><code class="highlighter-rouge">children</code></a> method.</p>

    <p>Example:</p>

    <div class="language-js highlighter-rouge">
<pre class="highlight"><code><span class="kd">let</span> <span class="nx">parent</span> <span class="o">=</span> <span class="nx">widget</span><span class="p">.</span><span class="nx">parent</span><span class="p">();</span>
<span class="kd">let</span> <span class="nx">firstChild</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">children</span><span class="p">()[</span><span class="mi">0</span><span class="p">];</span>
<span class="kd">let</span> <span class="nx">lastChild</span> <span class="o">=</span> <span class="nx">parent</span><span class="p">.</span><span class="nx">children</span><span class="p">().</span><span class="nx">last</span><span class="p">();</span>
</code></pre>
    </div>

    <p>The result list of children is an array-like object of the type <a href="/tabris-js-docs/latest/api/WidgetCollection.html"><code class="highlighter-rouge">WidgetCollection</code></a>.</p>

    <h2 id="disposing-of-a-widget">Disposing of a Widget</h2>

    <p>The <code class="highlighter-rouge">dispose</code> method disposes of the widget and all of its children. It triggers a <em>removeChild</em> event on the parent and a <em>dispose</em> event on itself.</p>

    <p>Example:</p>

    <div class="language-js highlighter-rouge">
<pre class="highlight"><code><span class="nx">button</span><span class="p">.</span><span class="nx">on</span><span class="p">(</span><span class="s1">'dispose'</span><span class="p">,</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'Button disposed!'</span><span class="p">));</span>
<span class="nx">button</span><span class="p">.</span><span class="nx">dispose</span><span class="p">();</span>
</code></pre>
    </div>

    <p>After a widget is disposed none of its methods will work except <code class="highlighter-rouge">isDisposed()</code>, which returns <code class="highlighter-rouge">true</code> if the widget has been disposed, otherwise <code class="highlighter-rouge">false</code>.</p>
