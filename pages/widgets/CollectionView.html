    <h1 id="collectionview">CollectionView</h1>

    <p>Extends <a href="/tabris-js-docs/latest/api/Widget.html">Widget</a></p>

    <p>A scrollable list that displays data items in cells, one per row. Cells are created on demand by the <em>createCell</em> callback and reused on scrolling.</p>

    <p>Import this type with “<code class="highlighter-rouge">const {CollectionView} = require('tabris');</code>”</p>

    <table>
        <thead>
        <tr>
            <th>Android</th>
            <th>iOS</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td><img src="/tabris-js-docs/latest/api/img/android/CollectionView.png" alt="CollectionView on Android"></td>
            <td><img src="/tabris-js-docs/latest/api/img/ios/CollectionView.png" alt="CollectionView on iOS"></td>
        </tr>
        </tbody>
    </table>

    <h2 id="methods">Methods</h2>

    <h3 id="insertindex-count">insert(index, count)</h3>

    <p><strong>Parameters:</strong></p>

    <ul>
        <li>index: <em>number</em></li>
        <li>count: <em>number</em> [<strong>Optional</strong>]
            <ul>
                <li>the position to insert the items at. A negative index is interpreted as relative to the end. If the given index is greater than the item count, new items will be appended at the end.</li>
            </ul>
        </li>
    </ul>

    <p>Inserts one or more items at the given index. When no <em>count</em> is specified, a single item will be added at the given <em>index</em>. New cells may be created if needed. The <code class="highlighter-rouge">updateCell</code> callback will only be called for those new items that become immediately visible. Note that inserting new items changes the index of all subsequent items. This operation will update the <code class="highlighter-rouge">itemCount</code> property.</p>

    <h3 id="loaditemcount">load(itemCount)</h3>

    <p><strong>Parameters:</strong></p>

    <ul>
        <li>itemCount: <em>number</em>
            <ul>
                <li>the number of items in the model to load.</li>
            </ul>
        </li>
    </ul>

    <p>Loads a new model with the given <em>itemCount</em>. This operation will update the <code class="highlighter-rouge">itemCount</code> property.</p>

    <h3 id="refreshindex">refresh(index)</h3>

    <p><strong>Parameters:</strong></p>

    <ul>
        <li>index: <em>number</em> [<strong>Optional</strong>]
            <ul>
                <li>the index of the item that was changed.</li>
            </ul>
        </li>
    </ul>

    <p>Triggers an update of the item at the given <em>index</em> by calling the <code class="highlighter-rouge">updateCell</code> callback of the corresponding. If no <em>index</em> is given, all visible items will be updated.</p>

    <h3 id="removeindex-count">remove(index, count)</h3>

    <p><strong>Parameters:</strong></p>

    <ul>
        <li>index: <em>number</em>
            <ul>
                <li>the index of the first item to remove. A negative value is interpreted as relative to the end.</li>
            </ul>
        </li>
        <li>count: <em>number</em> [<strong>Optional</strong>]
            <ul>
                <li>the number of items to remove.</li>
            </ul>
        </li>
    </ul>

    <p>Removes one or more items beginning with the given index. When no <em>count</em> is given, only the item at <em>index</em> will be removed. Note that this changes the index of all subsequent items, however. This operation will update the <code class="highlighter-rouge">itemCount</code> property.</p>

    <h3 id="revealindex">reveal(index)</h3>

    <p><strong>Parameters:</strong></p>

    <ul>
        <li>index: <em>number</em>
            <ul>
                <li>the index of the item to reveal. If this is negative, it is interpreted as relative to the end</li>
            </ul>
        </li>
    </ul>

    <p>Scrolls the item with the given index into view.</p>

    <h2 id="properties">Properties</h2>

    <h3 id="cellheight">cellHeight</h3>

    <table>
        <tbody>
        <tr>
            <td>Type: *number</td>
            <td>“auto”</td>
            <td>((index: number, cellType: string) =&gt; number</td>
            <td>“auto”)*, default: <code class="highlighter-rouge">auto</code></td>
        </tr>
        </tbody>
    </table>

    <p>The height of a collection cell. If set to <code class="highlighter-rouge">"auto"</code>, the cell height will be calculated individually for each cell. If set to a function, this function will be called for every item, providing the item index and the cell type as parameters, and must return the cell height for the given item.</p>

    <h3 id="celltype">cellType</h3>

    <table>
        <tbody>
        <tr>
            <td>Type: *string</td>
            <td>((index: number) =&gt; string)*</td>
        </tr>
        </tbody>
    </table>

    <p>The name of the cell type to use for the item at the given index. This name will be passed to the <code class="highlighter-rouge">createCell</code> and <code class="highlighter-rouge">cellHeight</code> callbacks. Cells will be reused only for those items that map to the same cell type. If set to a function, this function will be called for every item, providing the item index as a parameter, and must return a unique name for the cell type to use for the given item.</p>

    <h3 id="columncount">columnCount</h3>
    <p class="platforms"><span class="ios-tag" title="supported on iOS">iOS</span><span class="android-tag" title="supported on Android">Android</span></p>

    <p>Type: <em>number</em>, default: <code class="highlighter-rouge">1</code></p>

    <p>The number of columns to display in the collection view. If set to a value <code class="highlighter-rouge">n &gt; 1</code>, each row will contain <code class="highlighter-rouge">n</code> items. The available space will be equally distributed between columns.</p>

    <h3 id="createcell">createCell</h3>

    <p>Type: <em>(cellType: string) =&gt; Widget</em></p>

    <p>A callback used to create a new reusable cell widget for a given type. This callback will be called by the framework and the created cell will be reused for different items. The created widget should be populated in the <code class="highlighter-rouge">updateCell</code> function.<br>This property can only be set on widget creation. Once set, it cannot be changed anymore.</p>

    <h3 id="firstvisibleindex">firstVisibleIndex</h3>

    <p><strong>read-only</strong><br>
        Type: <em>number</em></p>

    <p>The index of the first item that is currently visible on screen.</p>

    <h3 id="itemcount">itemCount</h3>

    <p>Type: <em>number</em></p>

    <p>The number of items to display. To add or remove items later, use the methods <code class="highlighter-rouge">insert()</code> and <code class="highlighter-rouge">remove()</code> instead of setting the <code class="highlighter-rouge">itemCount</code>. To display a new list of items, use the <code class="highlighter-rouge">load()</code> method.</p>

    <h3 id="lastvisibleindex">lastVisibleIndex</h3>

    <p><strong>read-only</strong><br>
        Type: <em>number</em></p>

    <p>The index of the last item that is currently visible on screen.</p>

    <h3 id="refreshenabled">refreshEnabled</h3>
    <p class="platforms"><span class="ios-tag" title="supported on iOS">iOS</span><span class="android-tag" title="supported on Android">Android</span></p>

    <p>Type: <em>boolean</em>, default: <code class="highlighter-rouge">false</code></p>

    <p>Enables the user to trigger a refresh by using the pull-to-refresh gesture.</p>

    <h3 id="refreshindicator">refreshIndicator</h3>
    <p class="platforms"><span class="ios-tag" title="supported on iOS">iOS</span><span class="android-tag" title="supported on Android">Android</span></p>

    <p>Type: <em>boolean</em>, default: <code class="highlighter-rouge">false</code></p>

    <p>Whether the refresh indicator is currently visible. Will be set to <code class="highlighter-rouge">true</code> when a <em>refresh</em> event is triggered. Reset it to <code class="highlighter-rouge">false</code> when the refresh is finished.</p>

    <h3 id="refreshmessage">refreshMessage</h3>
    <p class="platforms"><span class="ios-tag" title="supported on iOS">iOS</span></p>

    <p>Type: <em>string</em>, default: <code class="highlighter-rouge">""</code></p>

    <p>The message text displayed together with the refresh indicator. Currently not supported on Android.</p>

    <h3 id="updatecell">updateCell</h3>

    <p>Type: <em>(cell: Widget, index: number) =&gt; void</em></p>

    <p>A callback used to update a given cell widget to display the item with the given index. This callback will be called by the framework.<br>This property can only be set on widget creation. Once set, it cannot be changed anymore.</p>

    <h2 id="events">Events</h2>

    <h3 id="cellheightchanged">cellHeightChanged</h3>

    <p>Fired when the <a href="#cellHeight"><em>cellHeight</em></a> property has changed.</p>

    <h4 id="event-parameters">Event Parameters</h4>
    <ul>
        <li>
            <p><strong>target</strong>: <em>this</em>
                The widget the event was fired on.</p>
        </li>
        <li>
            <p><strong>value</strong>: <em>number|”auto”|((index: number, cellType: string) =&gt; number|”auto”)</em>
                The new value of <a href="#cellHeight"><em>cellHeight</em></a>.</p>
        </li>
    </ul>

    <h3 id="celltypechanged">cellTypeChanged</h3>

    <p>Fired when the <a href="#cellType"><em>cellType</em></a> property has changed.</p>

    <h4 id="event-parameters-1">Event Parameters</h4>
    <ul>
        <li>
            <p><strong>target</strong>: <em>this</em>
                The widget the event was fired on.</p>
        </li>
        <li>
            <p><strong>value</strong>: <em>string|((index: number) =&gt; string)</em>
                The new value of <a href="#cellType"><em>cellType</em></a>.</p>
        </li>
    </ul>

    <h3 id="columncountchanged">columnCountChanged</h3>

    <p>Fired when the <a href="#columnCount"><em>columnCount</em></a> property has changed.</p>

    <h4 id="event-parameters-2">Event Parameters</h4>
    <ul>
        <li>
            <p><strong>target</strong>: <em>this</em>
                The widget the event was fired on.</p>
        </li>
        <li>
            <p><strong>value</strong>: <em>number</em>
                The new value of <a href="#columnCount"><em>columnCount</em></a>.</p>
        </li>
    </ul>

    <h3 id="firstvisibleindexchanged">firstVisibleIndexChanged</h3>

    <p>Fired when the <a href="#firstVisibleIndex"><em>firstVisibleIndex</em></a> property has changed.</p>

    <h4 id="event-parameters-3">Event Parameters</h4>
    <ul>
        <li>
            <p><strong>target</strong>: <em>this</em>
                The widget the event was fired on.</p>
        </li>
        <li>
            <p><strong>value</strong>: <em>number</em>
                The new value of <a href="#firstVisibleIndex"><em>firstVisibleIndex</em></a>.</p>
        </li>
    </ul>

    <h3 id="itemcountchanged">itemCountChanged</h3>

    <p>Fired when the <a href="#itemCount"><em>itemCount</em></a> property has changed.</p>

    <h4 id="event-parameters-4">Event Parameters</h4>
    <ul>
        <li>
            <p><strong>target</strong>: <em>this</em>
                The widget the event was fired on.</p>
        </li>
        <li>
            <p><strong>value</strong>: <em>number</em>
                The new value of <a href="#itemCount"><em>itemCount</em></a>.</p>
        </li>
    </ul>

    <h3 id="lastvisibleindexchanged">lastVisibleIndexChanged</h3>

    <p>Fired when the <a href="#lastVisibleIndex"><em>lastVisibleIndex</em></a> property has changed.</p>

    <h4 id="event-parameters-5">Event Parameters</h4>
    <ul>
        <li>
            <p><strong>target</strong>: <em>this</em>
                The widget the event was fired on.</p>
        </li>
        <li>
            <p><strong>value</strong>: <em>number</em>
                The new value of <a href="#lastVisibleIndex"><em>lastVisibleIndex</em></a>.</p>
        </li>
    </ul>

    <h3 id="refresh">refresh</h3>
    <p class="platforms"><span class="ios-tag" title="supported on iOS">iOS</span><span class="android-tag" title="supported on Android">Android</span></p>
    <p>Fired when the user requested a refresh. An event listener should reset the <em>refreshIndicator</em> property when refresh is finished.</p>
    <h3 id="refreshenabledchanged">refreshEnabledChanged</h3>

    <p>Fired when the <a href="#refreshEnabled"><em>refreshEnabled</em></a> property has changed.</p>

    <h4 id="event-parameters-6">Event Parameters</h4>
    <ul>
        <li>
            <p><strong>target</strong>: <em>this</em>
                The widget the event was fired on.</p>
        </li>
        <li>
            <p><strong>value</strong>: <em>boolean</em>
                The new value of <a href="#refreshEnabled"><em>refreshEnabled</em></a>.</p>
        </li>
    </ul>

    <h3 id="refreshindicatorchanged">refreshIndicatorChanged</h3>

    <p>Fired when the <a href="#refreshIndicator"><em>refreshIndicator</em></a> property has changed.</p>

    <h4 id="event-parameters-7">Event Parameters</h4>
    <ul>
        <li>
            <p><strong>target</strong>: <em>this</em>
                The widget the event was fired on.</p>
        </li>
        <li>
            <p><strong>value</strong>: <em>boolean</em>
                The new value of <a href="#refreshIndicator"><em>refreshIndicator</em></a>.</p>
        </li>
    </ul>

    <h3 id="refreshmessagechanged">refreshMessageChanged</h3>

    <p>Fired when the <a href="#refreshMessage"><em>refreshMessage</em></a> property has changed.</p>

    <h4 id="event-parameters-8">Event Parameters</h4>
    <ul>
        <li>
            <p><strong>target</strong>: <em>this</em>
                The widget the event was fired on.</p>
        </li>
        <li>
            <p><strong>value</strong>: <em>string</em>
                The new value of <a href="#refreshMessage"><em>refreshMessage</em></a>.</p>
        </li>
    </ul>

    <h3 id="scroll">scroll</h3>

    <p>Fired while the collection view is scrolling.</p>

    <h4 id="event-parameters-9">Event Parameters</h4>
    <ul>
        <li>
            <p><strong>target</strong>: <em>this</em>
                The widget the event was fired on.</p>
        </li>
        <li>
            <p><strong>deltaX</strong>: <em>number</em>
                Currently always 0.</p>
        </li>
        <li>
            <p><strong>deltaY</strong>: <em>number</em>
                The delta of the scroll position. Positive when scrolling up and negative when scrolling down.</p>
        </li>
    </ul>

    <h3 id="select">select</h3>

    <p>Fired when a cell is selected.</p>

    <h4 id="event-parameters-10">Event Parameters</h4>
    <ul>
        <li>
            <p><strong>target</strong>: <em>this</em>
                The widget the event was fired on.</p>
        </li>
        <li>
            <p><strong>index</strong>: <em>number</em>
                The index of the selected item.</p>
        </li>
    </ul>

    <h2 id="example">Example</h2>
    <div class="language-js highlighter-rouge"><pre class="highlight"><code><span class="c1">// Create a collection view, initialize its cells and fill it with items</span>
<span class="kr">const</span> <span class="p">{</span><span class="nx">CollectionView</span><span class="p">,</span> <span class="nx">Composite</span><span class="p">,</span> <span class="nx">ImageView</span><span class="p">,</span> <span class="nx">TextView</span><span class="p">,</span> <span class="nx">ui</span><span class="p">}</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'tabris'</span><span class="p">);</span>
<span class="kr">const</span> <span class="nx">IMAGE_PATH</span> <span class="o">=</span> <span class="s1">'images/'</span><span class="p">;</span>

<span class="kd">let</span> <span class="nx">people</span> <span class="o">=</span> <span class="p">[</span>
  <span class="p">[</span><span class="s1">'Holger'</span><span class="p">,</span> <span class="s1">'Staudacher'</span><span class="p">,</span> <span class="s1">'holger.jpg'</span><span class="p">],</span>
  <span class="p">[</span><span class="s1">'Ian'</span><span class="p">,</span> <span class="s1">'Bull'</span><span class="p">,</span> <span class="s1">'ian.jpg'</span><span class="p">],</span>
  <span class="p">[</span><span class="s1">'Jochen'</span><span class="p">,</span> <span class="s1">'Krause'</span><span class="p">,</span> <span class="s1">'jochen.jpg'</span><span class="p">],</span>
  <span class="p">[</span><span class="s1">'Jordi'</span><span class="p">,</span> <span class="s1">'Böhme López'</span><span class="p">,</span> <span class="s1">'jordi.jpg'</span><span class="p">],</span>
  <span class="p">[</span><span class="s1">'Markus'</span><span class="p">,</span> <span class="s1">'Knauer'</span><span class="p">,</span> <span class="s1">'markus.jpg'</span><span class="p">],</span>
  <span class="p">[</span><span class="s1">'Moritz'</span><span class="p">,</span> <span class="s1">'Post'</span><span class="p">,</span> <span class="s1">'moritz.jpg'</span><span class="p">],</span>
  <span class="p">[</span><span class="s1">'Ralf'</span><span class="p">,</span> <span class="s1">'Sternberg'</span><span class="p">,</span> <span class="s1">'ralf.jpg'</span><span class="p">],</span>
  <span class="p">[</span><span class="s1">'Tim'</span><span class="p">,</span> <span class="s1">'Buschtöns'</span><span class="p">,</span> <span class="s1">'tim.jpg'</span><span class="p">]</span>
<span class="p">].</span><span class="nx">map</span><span class="p">(([</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="nx">image</span><span class="p">])</span> <span class="o">=&gt;</span> <span class="p">({</span><span class="nx">firstName</span><span class="p">,</span> <span class="nx">lastName</span><span class="p">,</span> <span class="na">image</span><span class="p">:</span> <span class="nx">IMAGE_PATH</span> <span class="o">+</span> <span class="nx">image</span><span class="p">}));</span>

<span class="k">new</span> <span class="nx">CollectionView</span><span class="p">({</span>
  <span class="na">left</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">top</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">bottom</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span>
  <span class="na">itemCount</span><span class="p">:</span> <span class="nx">people</span><span class="p">.</span><span class="nx">length</span><span class="p">,</span>
  <span class="na">cellHeight</span><span class="p">:</span> <span class="mi">256</span><span class="p">,</span>
  <span class="na">createCell</span><span class="p">:</span> <span class="p">()</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">cell</span> <span class="o">=</span> <span class="k">new</span> <span class="nx">Composite</span><span class="p">();</span>
    <span class="k">new</span> <span class="nx">ImageView</span><span class="p">({</span>
      <span class="na">top</span><span class="p">:</span> <span class="mi">16</span><span class="p">,</span> <span class="na">centerX</span><span class="p">:</span> <span class="mi">0</span><span class="p">,</span> <span class="na">width</span><span class="p">:</span> <span class="mi">200</span><span class="p">,</span> <span class="na">height</span><span class="p">:</span> <span class="mi">200</span>
    <span class="p">}).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">cell</span><span class="p">);</span>
    <span class="k">new</span> <span class="nx">TextView</span><span class="p">({</span>
      <span class="na">left</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span> <span class="na">top</span><span class="p">:</span> <span class="s1">'prev() 16'</span><span class="p">,</span> <span class="na">right</span><span class="p">:</span> <span class="mi">30</span><span class="p">,</span>
      <span class="na">alignment</span><span class="p">:</span> <span class="s1">'center'</span>
    <span class="p">}).</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">cell</span><span class="p">);</span>
    <span class="k">return</span> <span class="nx">cell</span><span class="p">;</span>
  <span class="p">},</span>
  <span class="na">updateCell</span><span class="p">:</span> <span class="p">(</span><span class="nx">cell</span><span class="p">,</span> <span class="nx">index</span><span class="p">)</span> <span class="o">=&gt;</span> <span class="p">{</span>
    <span class="kd">let</span> <span class="nx">person</span> <span class="o">=</span> <span class="nx">people</span><span class="p">[</span><span class="nx">index</span><span class="p">];</span>
    <span class="nx">cell</span><span class="p">.</span><span class="nx">apply</span><span class="p">({</span>
      <span class="na">ImageView</span><span class="p">:</span> <span class="p">{</span><span class="na">image</span><span class="p">:</span> <span class="nx">person</span><span class="p">.</span><span class="nx">image</span><span class="p">},</span>
      <span class="na">TextView</span><span class="p">:</span> <span class="p">{</span><span class="na">text</span><span class="p">:</span> <span class="nx">person</span><span class="p">.</span><span class="nx">firstName</span><span class="p">}</span>
    <span class="p">});</span>
  <span class="p">}</span>
<span class="p">}).</span><span class="nx">on</span><span class="p">(</span><span class="s1">'select'</span><span class="p">,</span> <span class="p">({</span><span class="nx">index</span><span class="p">})</span> <span class="o">=&gt;</span> <span class="nx">console</span><span class="p">.</span><span class="nx">log</span><span class="p">(</span><span class="s1">'selected'</span><span class="p">,</span> <span class="nx">people</span><span class="p">[</span><span class="nx">index</span><span class="p">].</span><span class="nx">firstName</span><span class="p">))</span>
  <span class="p">.</span><span class="nx">appendTo</span><span class="p">(</span><span class="nx">ui</span><span class="p">.</span><span class="nx">contentView</span><span class="p">);</span>
</code></pre>
    </div>
    <h2 id="see-also">See also</h2>

    <ul>
        <li><a href="https://github.com/eclipsesource/tabris-js/tree/v2.1.0/snippets/collectionview.js">CollectionView example</a></li>
    </ul>